{% extends "base.html" %}

{% block title %}DiaryVault - Your Blockchain-Powered Private Journal{% endblock %}

{% block extra_css %}
<style>
  /* Core Typography & Fonts */
  @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Caveat:wght@400;600;700&display=swap');
  
  .diary-font {
    font-family: 'Playfair Display', serif;
    letter-spacing: -0.02em;
  }

  .handwritten {
    font-family: 'Caveat', cursive;
    letter-spacing: 0.02em;
    line-height: 1.8;
  }

  /* Background Animations */
  @keyframes float {
    0%, 100% { transform: translate(0, 0) rotate(0deg); }
    33% { transform: translate(30px, -30px) rotate(120deg); }
    66% { transform: translate(-20px, 20px) rotate(240deg); }
  }

  @keyframes pulse {
    0%, 100% { opacity: 0.4; transform: scale(1); }
    50% { opacity: 0.6; transform: scale(1.1); }
  }

  @keyframes gradient-shift {
    0% { background-position: 0% 50%; }
    50% { background-position: 100% 50%; }
    100% { background-position: 0% 50%; }
  }

  @keyframes shimmer {
    0% { background-position: -1000px 0; }
    100% { background-position: 1000px 0; }
  }

  /* Floating Elements */
  .floating-element {
    position: absolute;
    animation: float 20s infinite ease-in-out;
    filter: blur(40px);
    opacity: 0.3;
  }

  .gradient-orb {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 50%, #f093fb 100%);
    border-radius: 50%;
  }

  /* Enhanced Hero Section */
  .hero-section {
    position: relative;
    min-height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
    overflow: hidden;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
  }

  .hero-background {
    position: absolute;
    inset: 0;
    z-index: 0;
  }

  .hero-content {
    position: relative;
    z-index: 10;
    text-align: center;
    max-width: 1200px;
    padding: 2rem;
  }

  /* Blockchain Badge */
  .blockchain-badge {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
    backdrop-filter: blur(10px);
    border: 1px solid rgba(99, 102, 241, 0.3);
    padding: 0.75rem 1.5rem;
    border-radius: 2rem;
    margin-bottom: 2rem;
    animation: pulse 4s infinite;
  }

  .blockchain-icon {
    width: 24px;
    height: 24px;
    animation: float 3s infinite;
  }

  /* Hero Title Styling */
  .hero-title {
    font-size: clamp(3rem, 8vw, 6rem);
    font-weight: 900;
    line-height: 1.1;
    margin-bottom: 1.5rem;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 25%, #f093fb 50%, #667eea 75%, #764ba2 100%);
    background-size: 200% auto;
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    animation: gradient-shift 5s ease infinite;
  }

  /* Feature Cards Grid */
  .features-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 4rem;
  }

  .feature-card {
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 2rem;
    border: 1px solid rgba(255, 255, 255, 0.5);
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.08);
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
    overflow: hidden;
  }

  .feature-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.4), transparent);
    transition: left 0.5s;
  }

  .feature-card:hover::before {
    left: 100%;
  }

  .feature-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.12);
  }

  .feature-icon {
    width: 64px;
    height: 64px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    border-radius: 20px;
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 1.5rem;
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
    transition: all 0.3s ease;
  }

  .feature-card:hover .feature-icon {
    transform: rotate(5deg) scale(1.1);
  }

  /* Journal Demo Section */
  .journal-demo {
    position: relative;
    background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
    border-radius: 32px;
    padding: 4rem 2rem;
    margin: 4rem 0;
    overflow: hidden;
  }

  .journal-demo::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255, 255, 255, 0.1) 0%, transparent 70%);
    animation: pulse 4s infinite;
  }

  .journal-preview {
    background: white;
    border-radius: 20px;
    padding: 2rem;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.1);
    position: relative;
    max-width: 800px;
    margin: 0 auto;
  }

  .journal-line {
    border-bottom: 1px solid #e5e7eb;
    padding: 0.75rem 0;
    position: relative;
  }

  .journal-line::before {
    content: '';
    position: absolute;
    left: -20px;
    top: 50%;
    width: 8px;
    height: 8px;
    background: #ddd6fe;
    border-radius: 50%;
    transform: translateY(-50%);
  }

  /* Animated Text Typing */
  .typing-animation {
    overflow: hidden;
    border-right: 2px solid #764ba2;
    white-space: nowrap;
    animation: typing 3.5s steps(40, end), blink-caret 0.75s step-end infinite;
  }

  @keyframes typing {
    from { width: 0 }
    to { width: 100% }
  }

  @keyframes blink-caret {
    from, to { border-color: transparent }
    50% { border-color: #764ba2 }
  }

  /* Stats Section */
  .stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 2rem;
    margin: 4rem 0;
  }

  .stat-card {
    text-align: center;
    padding: 2rem;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9));
    border-radius: 20px;
    border: 1px solid rgba(99, 102, 241, 0.1);
    transition: all 0.3s ease;
  }

  .stat-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
  }

  .stat-number {
    font-size: 3rem;
    font-weight: 900;
    background: linear-gradient(135deg, #667eea, #764ba2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  /* Enhanced Journal Input */
  .journal-input-container {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95), rgba(249, 250, 251, 0.95));
    backdrop-filter: blur(20px);
    border-radius: 24px;
    padding: 2rem;
    border: 2px solid transparent;
    background-clip: padding-box;
    position: relative;
    transition: all 0.3s ease;
  }

  .journal-input-container::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 24px;
    padding: 2px;
    background: linear-gradient(135deg, #667eea, #764ba2, #f093fb);
    -webkit-mask: linear-gradient(#fff 0 0) content-box, linear-gradient(#fff 0 0);
    -webkit-mask-composite: xor;
    mask-composite: exclude;
    opacity: 0.5;
    transition: opacity 0.3s ease;
  }

  .journal-input-container:hover::before,
  .journal-input-container:focus-within::before {
    opacity: 1;
  }

  #journalInput {
    background: transparent;
    border: none;
    font-size: 1.25rem;
    line-height: 1.8;
    color: #1f2937;
    resize: none;
  }

  #journalInput::placeholder {
    color: #9ca3af;
    font-style: italic;
  }

  /* Quick Prompts Pills */
  .prompt-pill {
    display: inline-flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.5rem 1rem;
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
    border: 1px solid rgba(99, 102, 241, 0.2);
    border-radius: 2rem;
    font-size: 0.875rem;
    color: #6366f1;
    cursor: pointer;
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
  }

  .prompt-pill::after {
    content: '';
    position: absolute;
    inset: 0;
    background: linear-gradient(135deg, #667eea, #764ba2);
    opacity: 0;
    transition: opacity 0.3s ease;
  }

  .prompt-pill:hover {
    transform: translateY(-2px) scale(1.05);
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
    color: white;
    border-color: transparent;
  }

  .prompt-pill:hover::after {
    opacity: 1;
  }

  .prompt-pill span {
    position: relative;
    z-index: 1;
  }

  /* CTA Buttons */
  .cta-button {
    display: inline-flex;
    align-items: center;
    gap: 0.75rem;
    padding: 1rem 2rem;
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    border-radius: 2rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    box-shadow: 0 8px 24px rgba(99, 102, 241, 0.3);
    position: relative;
    overflow: hidden;
  }

  .cta-button::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    background: rgba(255, 255, 255, 0.2);
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.6s, height 0.6s;
  }

  .cta-button:hover::before {
    width: 300px;
    height: 300px;
  }

  .cta-button:hover {
    transform: translateY(-3px);
    box-shadow: 0 12px 32px rgba(99, 102, 241, 0.4);
  }

  .cta-secondary {
    background: white;
    color: #6366f1;
    border: 2px solid #6366f1;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.1);
  }

  .cta-secondary:hover {
    background: #6366f1;
    color: white;
  }

  /* Testimonial Cards */
  .testimonial-card {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.9), rgba(249, 250, 251, 0.9));
    backdrop-filter: blur(10px);
    border-radius: 20px;
    padding: 2rem;
    border: 1px solid rgba(99, 102, 241, 0.1);
    position: relative;
    overflow: hidden;
  }

  .testimonial-card::before {
    content: '"';
    position: absolute;
    top: -20px;
    left: 20px;
    font-size: 100px;
    color: rgba(99, 102, 241, 0.1);
    font-family: 'Playfair Display', serif;
  }

  /* Blockchain Network Section */
  .blockchain-section {
    background: linear-gradient(135deg, #1e293b, #334155);
    color: white;
    padding: 4rem 2rem;
    border-radius: 32px;
    position: relative;
    overflow: hidden;
    margin: 4rem 0;
  }

  .blockchain-section::before {
    content: '';
    position: absolute;
    inset: 0;
    background: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E") repeat;
    animation: float 20s linear infinite;
  }

  /* Wallet Section - Compact */
  .wallet-section {
    background: linear-gradient(135deg, rgba(249, 250, 251, 0.9), rgba(243, 244, 246, 0.9));
    border-radius: 20px;
    padding: 1.5rem;
    border: 1px solid rgba(99, 102, 241, 0.1);
    margin: 2rem 0;
    transition: all 0.3s ease;
  }

  .wallet-section:hover {
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06);
  }

  /* Responsive Design */
  @media (max-width: 768px) {
    .hero-title {
      font-size: clamp(2.5rem, 6vw, 4rem);
    }

    .features-grid {
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    .stats-grid {
      grid-template-columns: repeat(2, 1fr);
      gap: 1rem;
    }

    .journal-preview {
      padding: 1.5rem;
    }

    .blockchain-section {
      padding: 3rem 1.5rem;
    }
  }

  /* Loading States */
  .shimmer {
    background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
    background-size: 200% 100%;
    animation: shimmer 1.5s infinite;
  }

  /* Accessibility */
  @media (prefers-reduced-motion: reduce) {
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
</style>
{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero-section">
  <!-- Animated Background Elements -->
  <div class="hero-background">
    <div class="floating-element gradient-orb" style="width: 400px; height: 400px; top: -200px; left: -200px;"></div>
    <div class="floating-element gradient-orb" style="width: 300px; height: 300px; bottom: -150px; right: -150px; animation-delay: -5s;"></div>
    <div class="floating-element gradient-orb" style="width: 250px; height: 250px; top: 50%; left: 50%; animation-delay: -10s;"></div>
  </div>

  <div class="hero-content">
    <!-- Blockchain Badge -->
    <div class="blockchain-badge">
      <svg class="blockchain-icon" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19.428 15.428a2 2 0 00-1.022-.547l-2.387-.477a6 6 0 00-3.86.517l-.318.158a6 6 0 01-3.86.517L6.05 15.21a2 2 0 00-1.806.547M8 4h8l-1 1v5.172a2 2 0 00.586 1.414l5 5c1.26 1.26.367 3.414-1.415 3.414H4.828c-1.782 0-2.674-2.154-1.414-3.414l5-5A2 2 0 009 10.172V5L8 4z"/>
      </svg>
      <span class="font-semibold">Powered by DiaryVault Blockchain</span>
    </div>

    <!-- Main Title -->
    <h1 class="hero-title diary-font">
      Your Thoughts,<br>
      Forever Yours
    </h1>

    <!-- Subtitle -->
    <p class="text-xl md:text-2xl text-gray-700 mb-8 max-w-3xl mx-auto">
      Write your story on our custom blockchain. Every word encrypted, every entry rewarded, every memory truly owned by you.
    </p>

    <!-- CTA Buttons -->
    <div class="flex flex-col sm:flex-row gap-4 justify-center items-center mb-12">
      <a href="#start-writing" class="cta-button">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"/>
        </svg>
        <span>Start Writing</span>
      </a>
      <a href="#how-it-works" class="cta-button cta-secondary">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
        </svg>
        <span>See How It Works</span>
      </a>
    </div>

    <!-- Feature Pills -->
    <div class="flex flex-wrap gap-3 justify-center">
      <div class="prompt-pill">
        <span>🔐 End-to-End Encrypted</span>
      </div>
      <div class="prompt-pill">
        <span>💎 Earn Tokens Daily</span>
      </div>
      <div class="prompt-pill">
        <span>📝 AI-Enhanced Writing</span>
      </div>
      <div class="prompt-pill">
        <span>🚀 Own Your Data Forever</span>
      </div>
    </div>
  </div>
</section>

<!-- Stats Section -->
<section class="container mx-auto px-4 py-12">
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-number">50K+</div>
      <div class="text-gray-600">Writers Worldwide</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">2M+</div>
      <div class="text-gray-600">Entries Secured</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">$100K+</div>
      <div class="text-gray-600">Rewards Distributed</div>
    </div>
    <div class="stat-card">
      <div class="stat-number">100%</div>
      <div class="text-gray-600">Privacy Guaranteed</div>
    </div>
  </div>
</section>

<!-- Journal Demo Section -->
<section id="start-writing" class="container mx-auto px-4 py-12">
  <div class="journal-demo">
    <div class="text-center mb-8 relative z-10">
      <h2 class="text-4xl font-bold diary-font text-gray-900 mb-4">
        Experience the Magic of Blockchain Journaling
      </h2>
      <p class="text-xl text-gray-700">
        Write freely, earn rewards, own your memories forever
      </p>
    </div>

    <div class="journal-preview">
      <!-- Date Header -->
      <div class="flex items-center justify-between mb-6">
        <div class="flex items-center gap-3">
          <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white font-bold">
            {{ current_date|date:"d" }}
          </div>
          <div>
            <div class="font-semibold text-gray-900">{{ current_date|date:"l" }}</div>
            <div class="text-sm text-gray-600">{{ current_date|date:"F Y" }}</div>
          </div>
        </div>
        <div class="text-sm text-gray-500">
          <span class="inline-flex items-center gap-1">
            <svg class="w-4 h-4 text-green-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/>
            </svg>
            Blockchain Secured
          </span>
        </div>
      </div>

      <!-- Journal Input -->
      <form id="demoForm" enctype="multipart/form-data">
        {% csrf_token %}
        <div class="journal-input-container">
          <textarea
            id="journalInput"
            name="journal_content"
            rows="6"
            placeholder="What's on your mind today? Your thoughts are encrypted and stored on our custom blockchain..."
            class="w-full focus:outline-none"
          ></textarea>

          <!-- Tools Bar -->
          <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-200">
            <div class="flex items-center gap-3">
              <input id="journalPhoto" name="journal_photo" type="file" accept="image/*" class="hidden" onchange="previewPhoto(event)">
              <label for="journalPhoto" class="cursor-pointer p-2 hover:bg-gray-100 rounded-full transition-colors">
                <svg class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                </svg>
              </label>
              
              <button type="button" class="p-2 hover:bg-gray-100 rounded-full transition-colors">
                <svg class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M14.828 14.828a4 4 0 01-5.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                </svg>
              </button>

              <div class="h-6 w-px bg-gray-300"></div>

              <span class="text-sm text-gray-500">
                <span id="charCount">0</span> characters
              </span>
            </div>

            <button type="button" id="demoButton" onclick="generateDemo()" class="cta-button">
              <span>Transform & Save</span>
              <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
              </svg>
            </button>
          </div>
        </div>
      </form>

      <!-- Quick Prompts -->
      <div class="mt-6">
        <p class="text-sm text-gray-600 mb-3">Need inspiration? Try these prompts:</p>
        <div class="flex flex-wrap gap-2">
          <button onclick="addSuggestion('Today I feel grateful for')" class="prompt-pill">
            <span>🙏 Gratitude</span>
          </button>
          <button onclick="addSuggestion('A moment that made me smile')" class="prompt-pill">
            <span>😊 Happy Moment</span>
          </button>
          <button onclick="addSuggestion('I learned something new today')" class="prompt-pill">
            <span>💡 Learning</span>
          </button>
          <button onclick="addSuggestion('My biggest win today was')" class="prompt-pill">
            <span>🏆 Achievement</span>
          </button>
          <button onclick="addSuggestion('A thought I want to remember')" class="prompt-pill">
            <span>💭 Reflection</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Features Grid -->
<section id="how-it-works" class="container mx-auto px-4 py-12">
  <div class="text-center mb-12">
    <h2 class="text-4xl font-bold diary-font mb-4">Why DiaryVault is Different</h2>
    <p class="text-xl text-gray-600">Built on our custom blockchain for ultimate privacy and ownership</p>
  </div>

  <div class="features-grid">
    <div class="feature-card">
      <div class="feature-icon">
        <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"/>
        </svg>
      </div>
      <h3 class="text-xl font-bold mb-3">Military-Grade Encryption</h3>
      <p class="text-gray-600">Your entries are encrypted with AES-256 before they touch our blockchain. Only you can decrypt them.</p>
    </div>

    <div class="feature-card">
      <div class="feature-icon">
        <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
        </svg>
      </div>
      <h3 class="text-xl font-bold mb-3">Custom DiaryVault Blockchain</h3>
      <p class="text-gray-600">Built specifically for journaling with fast confirmations, low fees, and optimized for content storage.</p>
    </div>

    <div class="feature-card">
      <div class="feature-icon">
        <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
        </svg>
      </div>
      <h3 class="text-xl font-bold mb-3">Write & Earn Daily</h3>
      <p class="text-gray-600">Get rewarded with $DIARY tokens for consistent journaling. Build wealth while building memories.</p>
    </div>

    <div class="feature-card">
      <div class="feature-icon">
        <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
        </svg>
      </div>
      <h3 class="text-xl font-bold mb-3">AI Writing Assistant</h3>
      <p class="text-gray-600">Optional AI enhancement to help you articulate thoughts, find insights, and create beautiful entries.</p>
    </div>

    <div class="feature-card">
      <div class="feature-icon">
        <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"/>
        </svg>
      </div>
      <h3 class="text-xl font-bold mb-3">NFT Your Memories</h3>
      <p class="text-gray-600">Turn special entries into NFTs. Own your memories as digital assets on the blockchain forever.</p>
    </div>

    <div class="feature-card">
      <div class="feature-icon">
        <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.999 5.002 5.002 0 10-9.78 2.096A4.001 4.001 0 003 15z"/>
        </svg>
      </div>
      <h3 class="text-xl font-bold mb-3">Decentralized Storage</h3>
      <p class="text-gray-600">Your encrypted entries stored across our blockchain network. No single point of failure.</p>
    </div>
  </div>
</section>

<!-- Blockchain Section -->
<section class="container mx-auto px-4 py-12">
  <div class="blockchain-section">
    <div class="relative z-10">
      <div class="text-center mb-12">
        <h2 class="text-4xl font-bold diary-font mb-4">The DiaryVault Blockchain</h2>
        <p class="text-xl text-gray-300 max-w-3xl mx-auto">
          We're building our own blockchain optimized for journaling. Fast, secure, and designed specifically for personal content.
        </p>
      </div>

      <div class="grid md:grid-cols-2 gap-8 max-w-6xl mx-auto">
        <div class="text-left">
          <h3 class="text-2xl font-bold mb-6">Why Our Own Blockchain?</h3>
          <ul class="space-y-4">
            <li class="flex items-start gap-3">
              <svg class="w-6 h-6 text-green-400 flex-shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
              <div>
                <strong class="block">Optimized for Content</strong>
                <span class="text-gray-400">Built specifically for storing and retrieving journal entries efficiently</span>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-6 h-6 text-green-400 flex-shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
              <div>
                <strong class="block">Ultra-Low Fees</strong>
                <span class="text-gray-400">Write unlimited entries for fractions of a cent</span>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-6 h-6 text-green-400 flex-shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
              <div>
                <strong class="block">Privacy First</strong>
                <span class="text-gray-400">Zero-knowledge proofs and encrypted storage by default</span>
              </div>
            </li>
            <li class="flex items-start gap-3">
              <svg class="w-6 h-6 text-green-400 flex-shrink-0 mt-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"/>
              </svg>
              <div>
                <strong class="block">Community Governed</strong>
                <span class="text-gray-400">Token holders decide the future of the platform</span>
              </div>
            </li>
          </ul>
        </div>

        <div class="text-left">
          <h3 class="text-2xl font-bold mb-6">Technical Specs</h3>
          <div class="space-y-4">
            <div class="bg-white/10 backdrop-blur rounded-lg p-4">
              <div class="flex justify-between items-center">
                <span class="text-gray-300">Consensus</span>
                <span class="font-mono text-green-400">Proof of Journal</span>
              </div>
            </div>
            <div class="bg-white/10 backdrop-blur rounded-lg p-4">
              <div class="flex justify-between items-center">
                <span class="text-gray-300">Block Time</span>
                <span class="font-mono text-green-400">3 seconds</span>
              </div>
            </div>
            <div class="bg-white/10 backdrop-blur rounded-lg p-4">
              <div class="flex justify-between items-center">
                <span class="text-gray-300">TPS</span>
                <span class="font-mono text-green-400">10,000+</span>
              </div>
            </div>
            <div class="bg-white/10 backdrop-blur rounded-lg p-4">
              <div class="flex justify-between items-center">
                <span class="text-gray-300">Token</span>
                <span class="font-mono text-green-400">$DIARY</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Compact Wallet Section -->
<section class="container mx-auto px-4 py-8">
  <div class="wallet-section">
    <div class="flex flex-col md:flex-row items-center justify-between gap-4">
      <div class="flex-1">
        <h3 class="text-lg font-semibold mb-2">Optional: Connect Your Wallet</h3>
        <p class="text-sm text-gray-600">
          While not required, connecting a wallet unlocks additional features like cross-device sync and enhanced rewards.
        </p>
      </div>
      <div class="flex gap-3">
        <button onclick="connectWallet()" class="px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg text-sm font-medium transition-colors">
          Connect Wallet
        </button>
        <a href="/learn-more" class="px-4 py-2 text-gray-600 hover:text-gray-900 text-sm font-medium">
          Learn More →
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Testimonials -->
<section class="container mx-auto px-4 py-12">
  <div class="text-center mb-12">
    <h2 class="text-4xl font-bold diary-font mb-4">Writers Love DiaryVault</h2>
    <p class="text-xl text-gray-600">Join thousands who've found their perfect digital journal</p>
  </div>

  <div class="grid md:grid-cols-3 gap-6">
    <div class="testimonial-card">
      <p class="text-gray-700 mb-4 relative z-10">
        "Finally, a journal that respects my privacy. The blockchain integration gives me peace of mind that my thoughts are truly mine."
      </p>
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full"></div>
        <div>
          <div class="font-semibold">Sarah Chen</div>
          <div class="text-sm text-gray-500">Daily Writer</div>
        </div>
      </div>
    </div>

    <div class="testimonial-card">
      <p class="text-gray-700 mb-4 relative z-10">
        "I love earning tokens while journaling. It motivates me to write daily and I've already earned enough to cover my coffee habit!"
      </p>
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-gradient-to-br from-green-500 to-teal-500 rounded-full"></div>
        <div>
          <div class="font-semibold">Marcus Johnson</div>
          <div class="text-sm text-gray-500">365-Day Streak</div>
        </div>
      </div>
    </div>

    <div class="testimonial-card">
      <p class="text-gray-700 mb-4 relative z-10">
        "The AI suggestions help me dig deeper into my thoughts. It's like having a thoughtful friend who asks the right questions."
      </p>
      <div class="flex items-center gap-3">
        <div class="w-12 h-12 bg-gradient-to-br from-pink-500 to-rose-500 rounded-full"></div>
        <div>
          <div class="font-semibold">Emma Rodriguez</div>
          <div class="text-sm text-gray-500">Creative Writer</div>
        </div>
      </div>
    </div>
  </div>
</section>

<!-- Final CTA -->
<section class="container mx-auto px-4 py-12 mb-12">
  <div class="bg-gradient-to-br from-purple-600 to-pink-600 rounded-3xl p-8 md:p-12 text-center text-white relative overflow-hidden">
    <div class="absolute inset-0 bg-black/20"></div>
    <div class="relative z-10">
      <h2 class="text-4xl font-bold diary-font mb-4">
        Start Your Blockchain Journal Today
      </h2>
      <p class="text-xl mb-8 text-white/90 max-w-2xl mx-auto">
        Join thousands of writers who've discovered the freedom of truly owning their thoughts
      </p>
      <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
        <a href="/signup" class="cta-button bg-white text-purple-600 hover:bg-gray-100">
          <span>Create Free Account</span>
          <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
          </svg>
        </a>
        <a href="/whitepaper" class="text-white/90 hover:text-white underline">
          Read the Whitepaper
        </a>
      </div>
    </div>
  </div>
</section>

<!-- Loading States -->
<div id="loadingIndicator" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center">
  <div class="bg-white rounded-2xl p-8 text-center">
    <div class="w-16 h-16 border-4 border-purple-200 border-t-purple-600 rounded-full animate-spin mx-auto mb-4"></div>
    <p class="text-lg font-semibold text-gray-800">Securing your entry on the blockchain...</p>
    <p class="text-sm text-gray-600 mt-2">This only takes a moment</p>
  </div>
</div>

<!-- Result Preview (Hidden by default) -->
<div id="resultPreview" class="hidden fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4">
  <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
    <!-- Results will be inserted here -->
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// Initialize everything when DOM is ready
document.addEventListener('DOMContentLoaded', function() {
  initializeJournalForm();
  initializeAnimations();
  initializeCounters();
  setupSmoothScroll();
});

// Character counting
function countChars() {
  const textArea = document.getElementById('journalInput');
  const charCount = document.getElementById('charCount');
  if (textArea && charCount) {
    charCount.textContent = textArea.value.length;
  }
}

// Add suggestion to input
function addSuggestion(text) {
  const textArea = document.getElementById('journalInput');
  if (!textArea) return;

  let currentText = textArea.value;
  if (currentText && !currentText.endsWith(' ')) {
    currentText += ' ';
  }

  textArea.value = currentText + text + ' ';
  textArea.focus();
  countChars();

  // Add a nice animation to the textarea
  textArea.style.transform = 'scale(1.02)';
  setTimeout(() => {
    textArea.style.transform = 'scale(1)';
  }, 200);
}

// Initialize journal form
function initializeJournalForm() {
  const journalInput = document.getElementById('journalInput');
  if (journalInput) {
    journalInput.addEventListener('input', function() {
      countChars();
      autoResize(this);
    });

    // Auto-resize textarea
    function autoResize(element) {
      element.style.height = 'auto';
      element.style.height = element.scrollHeight + 'px';
    }
  }
  
  countChars();
}

// Initialize animations
function initializeAnimations() {
  // Intersection Observer for fade-in animations
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('animate-fade-in');
      }
    });
  }, { threshold: 0.1 });

  // Observe all feature cards and sections
  document.querySelectorAll('.feature-card, .stat-card, .testimonial-card').forEach(el => {
    observer.observe(el);
  });
}

// Initialize counters
function initializeCounters() {
  const counters = document.querySelectorAll('.stat-number');
  
  counters.forEach(counter => {
    const target = parseInt(counter.innerText.replace(/[^0-9]/g, ''));
    const suffix = counter.innerText.replace(/[0-9]/g, '');
    let count = 0;
    const speed = 50;
    
    const updateCount = () => {
      const increment = target / speed;
      
      if (count < target) {
        count += increment;
        counter.innerText = Math.ceil(count) + suffix;
        setTimeout(updateCount, 30);
      } else {
        counter.innerText = target + suffix;
      }
    };
    
    // Start counting when visible
    const observer = new IntersectionObserver((entries) => {
      if (entries[0].isIntersecting) {
        updateCount();
        observer.disconnect();
      }
    });
    
    observer.observe(counter);
  });
}

// Setup smooth scrolling
function setupSmoothScroll() {
  document.querySelectorAll('a[href^="#"]').forEach(anchor => {
    anchor.addEventListener('click', function (e) {
      e.preventDefault();
      const target = document.querySelector(this.getAttribute('href'));
      if (target) {
        target.scrollIntoView({
          behavior: 'smooth',
          block: 'start'
        });
      }
    });
  });
}

// Generate demo journal entry
function generateDemo() {
  const journalInput = document.getElementById('journalInput');
  if (!journalInput || journalInput.value.trim().length < 10) {
    showToast('Please write at least 10 characters', 'warning');
    return;
  }

  const loadingIndicator = document.getElementById('loadingIndicator');
  const demoButton = document.getElementById('demoButton');
  
  if (loadingIndicator) loadingIndicator.classList.remove('hidden');
  if (demoButton) demoButton.disabled = true;

  // Simulate API call
  setTimeout(() => {
    if (loadingIndicator) loadingIndicator.classList.add('hidden');
    if (demoButton) demoButton.disabled = false;
    
    showToast('Entry saved to the blockchain!', 'success');
    
    // Show result preview
    displayResult({
      entry: journalInput.value,
      blockNumber: Math.floor(Math.random() * 1000000),
      txHash: '0x' + Math.random().toString(36).substring(2, 15),
      rewards: Math.floor(Math.random() * 10) + 5
    });
  }, 2000);
}

// Display result
function displayResult(data) {
  const resultPreview = document.getElementById('resultPreview');
  if (resultPreview) {
    resultPreview.innerHTML = `
      <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
        <div class="p-6 border-b">
          <h3 class="text-2xl font-bold diary-font">Entry Saved!</h3>
          <p class="text-gray-600 mt-2">Your journal entry has been encrypted and stored on the DiaryVault blockchain.</p>
        </div>
        <div class="p-6">
          <div class="bg-gray-50 rounded-lg p-4 mb-4">
            <p class="text-gray-800">${data.entry}</p>
          </div>
          <div class="grid grid-cols-2 gap-4">
            <div class="bg-green-50 rounded-lg p-4">
              <p class="text-sm text-gray-600">Rewards Earned</p>
              <p class="text-2xl font-bold text-green-600">${data.rewards} $DIARY</p>
            </div>
            <div class="bg-blue-50 rounded-lg p-4">
              <p class="text-sm text-gray-600">Block Number</p>
              <p class="text-2xl font-bold text-blue-600">#${data.blockNumber}</p>
            </div>
          </div>
          <div class="mt-4 bg-gray-50 rounded-lg p-4">
            <p class="text-sm text-gray-600">Transaction Hash</p>
            <p class="font-mono text-xs text-gray-800 break-all">${data.txHash}</p>
          </div>
        </div>
        <div class="p-6 border-t flex gap-3">
          <button onclick="closeResult()" class="flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium">
            Close
          </button>
          <a href="/dashboard" class="flex-1 px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded-lg font-medium text-center">
            Go to Dashboard
          </a>
        </div>
      </div>
    `;
    resultPreview.classList.remove('hidden');
  }
}

// Close result
function closeResult() {
  const resultPreview = document.getElementById('resultPreview');
  if (resultPreview) {
    resultPreview.classList.add('hidden');
  }
  
  // Reset form
  const journalInput = document.getElementById('journalInput');
  if (journalInput) {
    journalInput.value = '';
    countChars();
  }
}

// Toast notification
function showToast(message, type = 'info') {
  const toast = document.createElement('div');
  toast.className = `fixed bottom-4 right-4 px-6 py-3 rounded-lg text-white font-medium z-50 animate-fade-in ${
    type === 'success' ? 'bg-green-500' : 
    type === 'warning' ? 'bg-amber-500' : 
    type === 'error' ? 'bg-red-500' : 'bg-blue-500'
  }`;
  toast.textContent = message;
  
  document.body.appendChild(toast);
  
  setTimeout(() => {
    toast.classList.add('opacity-0');
    setTimeout(() => toast.remove(), 300);
  }, 3000);
}

// Mock wallet connection
function connectWallet() {
  showToast('Wallet connection coming soon!', 'info');
}

// Photo preview
function previewPhoto(event) {
  const file = event.target.files[0];
  if (file) {
    showToast('Photo uploaded!', 'success');
  }
}

// Add CSS for animations
const style = document.createElement('style');
style.textContent = `
  @keyframes animate-fade-in {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fade-in {
    animation: animate-fade-in 0.6s ease-out forwards;
  }
`;
document.head.appendChild(style);
</script>
{% endblock %}