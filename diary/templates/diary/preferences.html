{% extends 'base.html' %}

{% block title %}DiaryVault - Journal Preferences{% endblock %}

{% block extra_css %}
<style>
  :root {
    --primary-color: #6366f1;
    --primary-color-light: #818cf8;
    --primary-color-dark: #4f46e5;
    --secondary-color: #8b5cf6;
    --tertiary-color: #ec4899;
    --glass-bg: rgba(255, 255, 255, 0.15);
    --glass-border: rgba(255, 255, 255, 0.2);
    --card-shadow: 0 4px 15px rgba(0, 0, 0, 0.07);
    --content-width: 640px;
  }

  /* === Base animations === */
  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
  }

  .animate-fade-in {
    animation: fadeIn 0.5s ease forwards;
  }

  .animate-slide-up {
    animation: slideUp 0.5s ease forwards;
  }

  /* === Modern Card Design === */
  .modern-card {
    background: white;
    border-radius: 16px;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.06);
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    margin-bottom: 1.5rem;
    border: 1px solid rgba(0, 0, 0, 0.03);
    transform: translateZ(0);
  }

  .modern-card:hover {
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.09);
  }

  .card-header {
    padding: 1.25rem 1.5rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.04);
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .card-icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.25rem;
    height: 2.25rem;
    border-radius: 12px;
    flex-shrink: 0;
    background: linear-gradient(135deg, var(--primary-color-light), var(--primary-color));
    color: white;
  }

  .card-content {
    padding: 1.5rem;
  }

  /* === Typography === */
  .card-title {
    font-weight: 600;
    color: #1f2937;
    font-size: 1.125rem;
    margin: 0;
    line-height: 1.3;
  }

  .card-subtitle {
    color: #6b7280;
    font-size: 0.875rem;
    margin-top: 0.25rem;
  }

  /* === Modern Tab Design === */
  .tab-container {
    position: sticky;
    top: 0;
    z-index: 40;
    padding: 1rem 0;
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.95), rgba(255, 255, 255, 0.85));
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    margin-bottom: 1.5rem;
    border-bottom: 1px solid rgba(0, 0, 0, 0.04);
  }

  .tab-nav {
    display: flex;
    overflow-x: auto;
    scrollbar-width: none;
    -ms-overflow-style: none;
    scroll-snap-type: x mandatory;
    gap: 0.5rem;
    padding-bottom: 0.25rem;
  }

  .tab-nav::-webkit-scrollbar {
    display: none;
  }

  .tab-button {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background: rgba(255, 255, 255, 0.5);
    border: 1px solid rgba(0, 0, 0, 0.05);
    border-radius: 12px;
    color: #6b7280;
    font-weight: 500;
    white-space: nowrap;
    transition: all 0.3s;
    scroll-snap-align: start;
    flex-shrink: 0;
  }

  .tab-button.active {
    background: white;
    color: var(--primary-color);
    border-color: rgba(99, 102, 241, 0.1);
    box-shadow: 0 2px 10px rgba(99, 102, 241, 0.15);
  }

  .tab-button:hover:not(.active) {
    background: rgba(255, 255, 255, 0.8);
    color: #4b5563;
  }

  .tab-button svg {
    flex-shrink: 0;
  }

  /* === Toggle Switch === */
  .toggle-container {
    position: relative;
    width: 3rem;
    height: 1.75rem;
  }

  .toggle-checkbox {
    opacity: 0;
    width: 0;
    height: 0;
    position: absolute;
  }

  .toggle-label {
    position: absolute;
    cursor: pointer;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: #e5e7eb;
    transition: 0.4s;
    border-radius: 9999px;
  }

  .toggle-label:before {
    position: absolute;
    content: "";
    height: 1.25rem;
    width: 1.25rem;
    left: 0.25rem;
    bottom: 0.25rem;
    background-color: white;
    transition: 0.4s;
    border-radius: 50%;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  }

  .toggle-checkbox:checked + .toggle-label {
    background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
  }

  .toggle-checkbox:checked + .toggle-label:before {
    transform: translateX(1.25rem);
  }

  /* === Setting Row === */
  .setting-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 1rem 0;
    border-bottom: 1px solid rgba(0, 0, 0, 0.04);
  }

  .setting-row:last-child {
    border-bottom: none;
    padding-bottom: 0;
  }

  .setting-row:first-child {
    padding-top: 0;
  }

  .setting-title {
    font-weight: 500;
    color: #1f2937;
    margin-bottom: 0.25rem;
  }

  .setting-description {
    color: #6b7280;
    font-size: 0.875rem;
  }

  /* === Theme Selection === */
  .theme-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  .theme-option {
    position: relative;
    padding: 1rem;
    border-radius: 12px;
    border: 1px solid rgba(0, 0, 0, 0.05);
    background: white;
    cursor: pointer;
    transition: all 0.3s;
    overflow: hidden;
  }

  .theme-option:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }

  .theme-option input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
  }

  .theme-option-content {
    display: flex;
    align-items: center;
    gap: 0.75rem;
  }

  .theme-preview {
    width: 3rem;
    height: 3rem;
    border-radius: 8px;
    flex-shrink: 0;
    overflow: hidden;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.08);
  }

  .theme-preview-light {
    background-color: white;
  }

  .theme-preview-dark {
    background-color: #1f2937;
  }

  .theme-preview-system {
    background: linear-gradient(to right, white 50%, #1f2937 50%);
  }

  .theme-preview-paper {
    background-color: #fff8e1;
    background-image:
      linear-gradient(#f3e5c1 0.1rem, transparent 0.1rem),
      linear-gradient(90deg, #f3e5c1 0.1rem, transparent 0.1rem);
    background-size: 2rem 2rem;
  }

  .theme-details h4 {
    margin: 0;
    font-weight: 500;
    color: #1f2937;
  }

  .theme-details p {
    margin: 0.25rem 0 0;
    font-size: 0.75rem;
    color: #6b7280;
  }

  .theme-check {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    width: 1.25rem;
    height: 1.25rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    background: var(--primary-color);
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.2s;
  }

  .theme-option input:checked ~ .theme-check {
    opacity: 1;
    transform: scale(1);
  }

  .theme-option input:checked ~ .theme-option-content {
    opacity: 1;
  }

  .theme-option input:checked + label {
    border-color: var(--primary-color);
  }

  /* === Color Picker === */
  .color-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 0.75rem;
  }

  .color-option {
    position: relative;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 12px;
    cursor: pointer;
    transition: all 0.3s;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
  }

  .color-option:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15);
  }

  .color-option input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
  }

  .color-check {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%) scale(0);
    color: white;
    font-size: 1rem;
    transition: all 0.2s;
    text-shadow: 0 1px 2px rgba(0, 0, 0, 0.2);
  }

  .color-option input:checked ~ .color-check {
    transform: translate(-50%, -50%) scale(1);
  }

  .color-option input:checked + label {
    box-shadow: 0 0 0 2px white, 0 0 0 4px var(--primary-color);
  }

  /* === Font Selection === */
  .font-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  .font-option {
    position: relative;
    padding: 1rem;
    border-radius: 12px;
    border: 1px solid rgba(0, 0, 0, 0.05);
    background: white;
    cursor: pointer;
    transition: all 0.3s;
  }

  .font-option:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }

  .font-option input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
  }

  .font-sample {
    text-align: center;
    margin-top: 0.5rem;
    line-height: 1.4;
  }

  .font-name {
    text-align: center;
    font-size: 0.875rem;
    margin-top: 0.75rem;
    font-weight: 500;
    color: #4b5563;
  }

  .font-playfair { font-family: 'Playfair Display', serif; }
  .font-poppins { font-family: 'Poppins', sans-serif; }
  .font-caveat { font-family: 'Caveat', cursive; }
  .font-merriweather { font-family: 'Merriweather', serif; }

  .font-check {
    position: absolute;
    top: 0.5rem;
    right: 0.5rem;
    width: 1.25rem;
    height: 1.25rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    background: var(--primary-color);
    opacity: 0;
    transform: scale(0.8);
    transition: all 0.2s;
  }

  .font-option input:checked ~ .font-check {
    opacity: 1;
    transform: scale(1);
  }

  .font-option input:checked + label {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 1px var(--primary-color);
  }

  /* === Header Bar === */
  .page-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem 0 1.5rem;
  }

  .back-button {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 12px;
    background: white;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.06);
    color: #4b5563;
    transition: all 0.3s;
    border: 1px solid rgba(0, 0, 0, 0.04);
  }

  .back-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);
    color: var(--primary-color);
  }

  .page-title {
    font-size: 1.5rem;
    font-weight: 700;
    background: linear-gradient(90deg, var(--primary-color), var(--tertiary-color));
    -webkit-background-clip: text;
    background-clip: text;
    color: transparent;
  }

  /* === Day Picker === */
  .day-grid {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    gap: 0.5rem;
  }

  .day-option {
    position: relative;
    aspect-ratio: 1/1;
  }

  .day-option input {
    position: absolute;
    opacity: 0;
    cursor: pointer;
    height: 0;
    width: 0;
  }

  .day-label {
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100%;
    width: 100%;
    border-radius: 12px;
    background: white;
    border: 1px solid rgba(0, 0, 0, 0.05);
    font-size: 0.875rem;
    color: #4b5563;
    transition: all 0.2s;
  }

  .day-option input:checked + .day-label {
    background: var(--primary-color);
    color: white;
    border-color: var(--primary-color);
    box-shadow: 0 2px 5px rgba(99, 102, 241, 0.25);
  }

  .day-option:hover .day-label:not(.day-option input:checked + .day-label) {
    background: rgba(255, 255, 255, 0.8);
    transform: translateY(-2px);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
  }

  /* === Alert Boxes === */
  .alert-box {
    padding: 1rem;
    border-radius: 12px;
    margin-top: 1rem;
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
  }

  .alert-icon {
    flex-shrink: 0;
    width: 1.5rem;
    height: 1.5rem;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 50%;
  }

  .alert-content {
    flex-grow: 1;
  }

  .alert-title {
    font-weight: 600;
    margin-bottom: 0.25rem;
  }

  .alert-text {
    margin: 0;
  }

  .alert-info {
    background-color: rgba(59, 130, 246, 0.08);
    border: 1px solid rgba(59, 130, 246, 0.2);
  }

  .alert-info .alert-icon {
    background-color: rgba(59, 130, 246, 0.2);
    color: rgb(37, 99, 235);
  }

  .alert-info .alert-title {
    color: rgb(37, 99, 235);
  }

  .alert-warning {
    background-color: rgba(245, 158, 11, 0.08);
    border: 1px solid rgba(245, 158, 11, 0.2);
  }

  .alert-warning .alert-icon {
    background-color: rgba(245, 158, 11, 0.2);
    color: rgb(217, 119, 6);
  }

  .alert-warning .alert-title {
    color: rgb(217, 119, 6);
  }

  .alert-danger {
    background-color: rgba(239, 68, 68, 0.08);
    border: 1px solid rgba(239, 68, 68, 0.2);
  }

  .alert-danger .alert-icon {
    background-color: rgba(239, 68, 68, 0.2);
    color: rgb(220, 38, 38);
  }

  .alert-danger .alert-title {
    color: rgb(220, 38, 38);
  }

  /* === Buttons === */
  .button {
    padding: 0.75rem 1.25rem;
    border-radius: 12px;
    font-weight: 500;
    transition: all 0.3s;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    border: none;
    cursor: pointer;
  }

  .button-primary {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);
  }

  .button-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(99, 102, 241, 0.3);
  }

  .button-primary:active {
    transform: translateY(0);
  }

  .button-secondary {
    background: white;
    color: var(--primary-color);
    border: 1px solid rgba(99, 102, 241, 0.2);
  }

  .button-secondary:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }

  .button-danger {
    background: white;
    color: rgb(220, 38, 38);
    border: 1px solid rgba(239, 68, 68, 0.2);
  }

  .button-danger:hover {
    background: rgba(239, 68, 68, 0.05);
  }

  /* === Save Bar === */
  .save-bar {
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    background: rgba(255, 255, 255, 0.9);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    padding: 1rem;
    box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.08);
    transform: translateY(100%);
    transition: transform 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    z-index: 50;
    border-top: 1px solid rgba(0, 0, 0, 0.03);
  }

  .save-bar.visible {
    transform: translateY(0);
  }

  .save-bar-content {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: var(--content-width);
    margin: 0 auto;
  }

  .save-bar-text {
    font-size: 0.875rem;
    color: #6b7280;
  }

  .save-button {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    border: none;
    border-radius: 12px;
    padding: 0.75rem 1.5rem;
    font-weight: 600;
    transition: all 0.3s;
    box-shadow: 0 4px 12px rgba(99, 102, 241, 0.25);
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .save-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(99, 102, 241, 0.3);
  }

  .save-button:active {
    transform: translateY(0);
  }

  /* === Success Notification === */
  .success-notification {
    position: fixed;
    top: 1.5rem;
    right: 1.5rem;
    background: linear-gradient(135deg, #10b981, #059669);
    color: white;
    padding: 1rem 1.25rem;
    border-radius: 12px;
    box-shadow: 0 6px 16px rgba(16, 185, 129, 0.25);
    display: flex;
    align-items: center;
    gap: 0.75rem;
    z-index: 100;
    transform: translateY(-2rem);
    opacity: 0;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
  }

  .success-notification.visible {
    transform: translateY(0);
    opacity: 1;
  }

  /* === Responsive styles === */
  .page-container {
    max-width: var(--content-width);
    margin: 0 auto;
    padding: 0 1rem 6rem;
  }

  @media (max-width: 640px) {
    .theme-grid,
    .font-grid {
      grid-template-columns: 1fr;
    }

    .card-header {
      padding: 1rem;
    }

    .card-content {
      padding: 1.25rem;
    }

    .tab-button {
      padding: 0.6rem 1rem;
    }

    .color-grid {
      grid-template-columns: repeat(4, 1fr);
    }

    .page-title {
      font-size: 1.25rem;
    }

    .card-title {
      font-size: 1rem;
    }

    .save-button {
      padding: 0.6rem 1.25rem;
    }
  }

  /* === Reduced Motion === */
  body.reduce-motion * {
    animation: none !important;
    transition: none !important;
  }

  /* === Animation for card appearing === */
  .section-animate {
    animation: cardAppear 0.5s forwards cubic-bezier(0.25, 0.8, 0.25, 1);
    opacity: 0;
    transform: translateY(1rem);
  }

  @keyframes cardAppear {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* === Helper Utilities === */
  .mb-4 {
    margin-bottom: 1rem;
  }

  .mb-6 {
    margin-bottom: 1.5rem;
  }

  .mt-4 {
    margin-top: 1rem;
  }

  .grid-2 {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 0.75rem;
  }

  @media (max-width: 480px) {
    .grid-2 {
      grid-template-columns: 1fr;
    }
  }

  .w-full {
    width: 100%;
  }

  .flex {
    display: flex;
  }

  .items-center {
    align-items: center;
  }

  .justify-between {
    justify-content: space-between;
  }

  .gap-2 {
    gap: 0.5rem;
  }

  .text-sm {
    font-size: 0.875rem;
  }

  /* Spacing for fixed height container to account for fixed save bar */
  .page-content {
    padding-bottom: 4rem;
  }
</style>
{% endblock %}

{% block content %}
<div class="page-container">
  <!-- Page Header -->
  <header class="page-header animate-fade-in">
    <a href="{% url 'dashboard' %}" class="back-button">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M19 12H5M12 19l-7-7 7-7"/>
      </svg>
    </a>
    <h1 class="page-title">Journal Preferences</h1>
    <div style="width: 2.5rem"></div>
  </header>

  <!-- Success Notification -->
  <div id="successNotification" class="success-notification">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
      <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
      <polyline points="22 4 12 14.01 9 11.01"/>
    </svg>
    <span>Settings saved successfully</span>
  </div>

  <!-- Tab Navigation -->
  <div class="tab-container animate-fade-in">
    <div class="tab-nav">
      <button id="tab-appearance" class="tab-button active" data-tab="appearance-section">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="10"/>
          <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
        </svg>
        <span>Appearance</span>
      </button>
      <button id="tab-journal" class="tab-button" data-tab="journal-section">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"/>
          <path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"/>
        </svg>
        <span>Journaling</span>
      </button>
      <button id="tab-notifications" class="tab-button" data-tab="notifications-section">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
          <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
        </svg>
        <span>Alerts</span>
      </button>
      <button id="tab-privacy" class="tab-button" data-tab="privacy-section">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
          <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
        </svg>
        <span>Privacy</span>
      </button>
    </div>
  </div>

  <div class="page-content">
    <!-- Appearance Tab Content -->
    <section id="appearance-section" class="tab-content">
      <!-- Theme Selection -->
      <div class="modern-card section-animate" style="animation-delay: 0ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="5"/>
              <path d="M12 1v2M12 21v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Theme</h3>
            <p class="card-subtitle">Choose how your journal looks</p>
          </div>
        </div>
        <div class="card-content">
          <div class="theme-grid">
            <label class="theme-option">
              <input type="radio" name="theme" value="light" checked>
              <div class="theme-option-content">
                <div class="theme-preview theme-preview-light"></div>
                <div class="theme-details">
                  <h4>Light</h4>
                  <p>Clean, bright interface</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>

            <label class="theme-option">
              <input type="radio" name="theme" value="dark">
              <div class="theme-option-content">
                <div class="theme-preview theme-preview-dark"></div>
                <div class="theme-details">
                  <h4>Dark</h4>
                  <p>Easy on the eyes</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>

            <label class="theme-option">
              <input type="radio" name="theme" value="system">
              <div class="theme-option-content">
                <div class="theme-preview theme-preview-system"></div>
                <div class="theme-details">
                  <h4>System</h4>
                  <p>Matches your device</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>

            <label class="theme-option">
              <input type="radio" name="theme" value="paper">
              <div class="theme-option-content">
                <div class="theme-preview theme-preview-paper"></div>
                <div class="theme-details">
                  <h4>Paper</h4>
                  <p>Classic journal look</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>
          </div>
        </div>
      </div>

      <!-- Color Accent -->
      <div class="modern-card section-animate" style="animation-delay: 100ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0z"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Accent Color</h3>
            <p class="card-subtitle">Personalize your journal's color scheme</p>
          </div>
        </div>
        <div class="card-content">
          <div class="color-grid">
            <label class="color-option" style="background-color: #6366f1;">
              <input type="radio" name="accent-color" value="indigo" checked>
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #8b5cf6;">
              <input type="radio" name="accent-color" value="purple">
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #ec4899;">
              <input type="radio" name="accent-color" value="pink">
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #f43f5e;">
              <input type="radio" name="accent-color" value="rose">
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #ef4444;">
              <input type="radio" name="accent-color" value="red">
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #f97316;">
              <input type="radio" name="accent-color" value="orange">
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #eab308;">
              <input type="radio" name="accent-color" value="yellow">
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #10b981;">
              <input type="radio" name="accent-color" value="green">
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #06b6d4;">
              <input type="radio" name="accent-color" value="cyan">
              <div class="color-check">✓</div>
            </label>
            <label class="color-option" style="background-color: #3b82f6;">
              <input type="radio" name="accent-color" value="blue">
              <div class="color-check">✓</div>
            </label>
          </div>
        </div>
      </div>

      <!-- Font Selection -->
      <div class="modern-card section-animate" style="animation-delay: 200ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <polyline points="4 7 4 4 20 4 20 7"/>
              <line x1="9" y1="20" x2="15" y2="20"/>
              <line x1="12" y1="4" x2="12" y2="20"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Font Style</h3>
            <p class="card-subtitle">Select your preferred text style</p>
          </div>
        </div>
        <div class="card-content">
          <div class="mb-4">
            <div class="flex items-center justify-between mb-4">
              <button id="text-font-tab" class="tab-button active" style="width: 50%; border-radius: 10px 10px 10px 10px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="4 7 4 4 20 4 20 7"/>
                  <line x1="9" y1="20" x2="15" y2="20"/>
                  <line x1="12" y1="4" x2="12" y2="20"/>
                </svg>
                <span>Text</span>
              </button>
              <button id="handwriting-tab" class="tab-button" style="width: 50%; border-radius: 10px 10px 10px 10px;">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 19l7-7 3 3-7 7-3-3z"/>
                  <path d="M18 13l-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/>
                  <path d="M2 2l7.586 7.586"/>
                  <circle cx="11" cy="11" r="2"/>
                </svg>
                <span>Handwriting</span>
              </button>
            </div>

            <div id="text-font-options" class="font-grid">
              <label class="font-option">
                <input type="radio" name="text-font" value="poppins" checked>
                <div class="font-sample font-poppins">The quick brown fox jumps over the lazy dog.</div>
                <div class="font-name">Poppins</div>
                <div class="font-check">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </div>
              </label>

              <label class="font-option">
                <input type="radio" name="text-font" value="merriweather">
                <div class="font-sample font-merriweather">The quick brown fox jumps over the lazy dog.</div>
                <div class="font-name">Merriweather</div>
                <div class="font-check">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </div>
              </label>

              <label class="font-option">
                <input type="radio" name="text-font" value="playfair">
                <div class="font-sample font-playfair">The quick brown fox jumps over the lazy dog.</div>
                <div class="font-name">Playfair Display</div>
                <div class="font-check">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </div>
              </label>

              <label class="font-option">
                <input type="radio" name="text-font" value="system">
                <div class="font-sample" style="font-family: system-ui, -apple-system, sans-serif;">The quick brown fox jumps over the lazy dog.</div>
                <div class="font-name">System</div>
                <div class="font-check">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </div>
              </label>
            </div>

            <div id="handwriting-font-options" class="font-grid" style="display: none;">
              <label class="font-option">
                <input type="radio" name="handwriting-font" value="caveat" checked>
                <div class="font-sample font-caveat">The quick brown fox jumps over the lazy dog.</div>
                <div class="font-name">Caveat</div>
                <div class="font-check">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </div>
              </label>

              <label class="font-option">
                <input type="radio" name="handwriting-font" value="indie-flower">
                <div class="font-sample" style="font-family: 'Indie Flower', cursive;">The quick brown fox jumps over the lazy dog.</div>
                <div class="font-name">Indie Flower</div>
                <div class="font-check">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </div>
              </label>

              <label class="font-option">
                <input type="radio" name="handwriting-font" value="dancing-script">
                <div class="font-sample" style="font-family: 'Dancing Script', cursive;">The quick brown fox jumps over the lazy dog.</div>
                <div class="font-name">Dancing Script</div>
                <div class="font-check">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </div>
              </label>

              <label class="font-option">
                <input type="radio" name="handwriting-font" value="shadows-into-light">
                <div class="font-sample" style="font-family: 'Shadows Into Light', cursive;">The quick brown fox jumps over the lazy dog.</div>
                <div class="font-name">Shadows Into Light</div>
                <div class="font-check">
                  <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                    <polyline points="20 6 9 17 4 12"/>
                  </svg>
                </div>
              </label>
            </div>
          </div>
        </div>
      </div>

      <!-- Accessibility -->
      <div class="modern-card section-animate" style="animation-delay: 300ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/>
              <rect x="8" y="2" width="8" height="4" rx="1" ry="1"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Accessibility</h3>
            <p class="card-subtitle">Make your journal easier to use</p>
          </div>
        </div>
        <div class="card-content">
          <div class="setting-row">
            <div>
              <div class="setting-title">Reduce Motion</div>
              <div class="setting-description">Minimize animated effects</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="reduce-motion" class="toggle-checkbox">
              <label for="reduce-motion" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Larger Text</div>
              <div class="setting-description">Increase text sizes</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="larger-text" class="toggle-checkbox">
              <label for="larger-text" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">High Contrast</div>
              <div class="setting-description">Improve text readability</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="high-contrast" class="toggle-checkbox">
              <label for="high-contrast" class="toggle-label"></label>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Journaling Tab Content -->
    <section id="journal-section" class="tab-content" style="display: none;">
      <!-- Journal Reminders -->
      <div class="modern-card section-animate" style="animation-delay: 0ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Journaling Schedule</h3>
            <p class="card-subtitle">Set your preferred writing days</p>
          </div>
        </div>
        <div class="card-content">
          <div class="day-grid mb-4">
            <label class="day-option">
              <input type="checkbox" name="journal-days" value="mon">
              <div class="day-label">Mon</div>
            </label>
            <label class="day-option">
              <input type="checkbox" name="journal-days" value="tue">
              <div class="day-label">Tue</div>
            </label>
            <label class="day-option">
              <input type="checkbox" name="journal-days" value="wed" checked>
              <div class="day-label">Wed</div>
            </label>
            <label class="day-option">
              <input type="checkbox" name="journal-days" value="thu">
              <div class="day-label">Thu</div>
            </label>
            <label class="day-option">
              <input type="checkbox" name="journal-days" value="fri" checked>
              <div class="day-label">Fri</div>
            </label>
            <label class="day-option">
              <input type="checkbox" name="journal-days" value="sat" checked>
              <div class="day-label">Sat</div>
            </label>
            <label class="day-option">
              <input type="checkbox" name="journal-days" value="sun" checked>
              <div class="day-label">Sun</div>
            </label>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Preferred Time</div>
              <div class="setting-description">When to receive reminders</div>
            </div>
            <select class="button button-secondary" style="background: white; padding: 0.5rem 1rem;">
              <option value="morning">Morning (8:00 AM)</option>
              <option value="afternoon">Afternoon (2:00 PM)</option>
              <option value="evening" selected>Evening (8:00 PM)</option>
              <option value="night">Night (10:00 PM)</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Writing Prompts -->
      <div class="modern-card section-animate" style="animation-delay: 100ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 20.94c1.5 0 2.75 1.06 4 1.06 3 0 4-3 4-6.5-2.5 0-4 2.5-4 5.5 0-2.5-2-5.5-4-5.5-2.04 0-4 3-4 5.5 0-2.5-1.5-5.5-4-5.5 0 3.5 1 6.5 4 6.5 1.25 0 2.5-1.06 4-1.06z"/>
              <path d="M12 11.94c1.5 0 2.75 1.06 4 1.06 3 0 4-3 4-6.5-2.5 0-4 2.5-4 5.5 0-2.5-2-5.5-4-5.5-2.04 0-4 3-4 5.5 0-2.5-1.5-5.5-4-5.5 0 3.5 1 6.5 4 6.5 1.25 0 2.5-1.06 4-1.06z"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Writing Prompts</h3>
            <p class="card-subtitle">Inspiration for your journal entries</p>
          </div>
        </div>
        <div class="card-content">
          <div class="setting-row">
            <div>
              <div class="setting-title">Daily Prompts</div>
              <div class="setting-description">Receive writing inspiration</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="daily-prompts" class="toggle-checkbox" checked>
              <label for="daily-prompts" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Prompt Categories</div>
              <div class="setting-description">Choose your preferred topics</div>
            </div>
            <button class="button button-secondary" style="background: white; padding: 0.5rem 1rem;">
              <span>Edit Categories</span>
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="9 18 15 12 9 6"/>
              </svg>
            </button>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">AI-Generated Prompts</div>
              <div class="setting-description">Personalized suggestions</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="ai-prompts" class="toggle-checkbox" checked>
              <label for="ai-prompts" class="toggle-label"></label>
            </div>
          </div>
        </div>
      </div>

      <!-- Entry Templates -->
      <div class="modern-card section-animate" style="animation-delay: 200ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
              <line x1="9" y1="3" x2="9" y2="21"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Entry Templates</h3>
            <p class="card-subtitle">Select your preferred structure</p>
          </div>
        </div>
        <div class="card-content">
          <div class="grid-2">
            <label class="theme-option">
              <input type="radio" name="template" value="freeform" checked>
              <div class="theme-option-content">
                <div class="theme-details">
                  <h4>Freeform</h4>
                  <p>Write without structure</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>

            <label class="theme-option">
              <input type="radio" name="template" value="gratitude">
              <div class="theme-option-content">
                <div class="theme-details">
                  <h4>Gratitude</h4>
                  <p>Focus on thankfulness</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>

            <label class="theme-option">
              <input type="radio" name="template" value="reflection">
              <div class="theme-option-content">
                <div class="theme-details">
                  <h4>Reflection</h4>
                  <p>Review your day</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>

            <label class="theme-option">
              <input type="radio" name="template" value="goals">
              <div class="theme-option-content">
                <div class="theme-details">
                  <h4>Goals</h4>
                  <p>Track your progress</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>

            <label class="theme-option">
              <input type="radio" name="template" value="mood">
              <div class="theme-option-content">
                <div class="theme-details">
                  <h4>Mood Tracker</h4>
                  <p>Monitor your emotions</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>

            <label class="theme-option">
              <input type="radio" name="template" value="custom">
              <div class="theme-option-content">
                <div class="theme-details">
                  <h4>Custom</h4>
                  <p>Create your own format</p>
                </div>
              </div>
              <div class="theme-check">
                <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                  <polyline points="20 6 9 17 4 12"/>
                </svg>
              </div>
            </label>
          </div>

          <button class="button button-secondary w-full mt-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <line x1="12" y1="5" x2="12" y2="19"/>
              <line x1="5" y1="12" x2="19" y2="12"/>
            </svg>
            <span>Create Custom Template</span>
          </button>
        </div>
      </div>
   <!-- Writing Stats -->
   <div class="modern-card section-animate" style="animation-delay: 300ms;">
    <div class="card-header">
      <div class="card-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21.21 15.89A10 10 0 1 1 8 2.83"/>
          <path d="M22 12A10 10 0 0 0 12 2v10z"/>
        </svg>
      </div>
      <div>
        <h3 class="card-title">Writing Stats</h3>
        <p class="card-subtitle">Track your journaling progress</p>
      </div>
    </div>
    <div class="card-content">
      <div class="setting-row">
        <div>
          <div class="setting-title">Word Count</div>
          <div class="setting-description">Track daily words written</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="word-count" class="toggle-checkbox" checked>
          <label for="word-count" class="toggle-label"></label>
        </div>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-title">Streak Tracking</div>
          <div class="setting-description">Consecutive days journaling</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="streak-tracking" class="toggle-checkbox" checked>
          <label for="streak-tracking" class="toggle-label"></label>
        </div>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-title">Mood Analysis</div>
          <div class="setting-description">Analyze emotional patterns</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="mood-analysis" class="toggle-checkbox">
          <label for="mood-analysis" class="toggle-label"></label>
        </div>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-title">Monthly Reports</div>
          <div class="setting-description">Receive summary emails</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="monthly-reports" class="toggle-checkbox" checked>
          <label for="monthly-reports" class="toggle-label"></label>
        </div>
      </div>
    </div>
  </div>

  <!-- Writing Insights -->
  <div class="modern-card section-animate" style="animation-delay: 400ms;">
    <div class="card-header">
      <div class="card-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"/>
          <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"/>
        </svg>
      </div>
      <div>
        <h3 class="card-title">Writing Insights</h3>
        <p class="card-subtitle">Discover patterns in your journal</p>
      </div>
    </div>
    <div class="card-content">
      <div class="setting-row">
        <div>
          <div class="setting-title">Topic Analysis</div>
          <div class="setting-description">Identify common themes</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="topic-analysis" class="toggle-checkbox" checked>
          <label for="topic-analysis" class="toggle-label"></label>
        </div>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-title">Sentiment Tracking</div>
          <div class="setting-description">Monitor emotional trends</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="sentiment-tracking" class="toggle-checkbox" checked>
          <label for="sentiment-tracking" class="toggle-label"></label>
        </div>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-title">Personal Growth</div>
          <div class="setting-description">Track development over time</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="personal-growth" class="toggle-checkbox">
          <label for="personal-growth" class="toggle-label"></label>
        </div>
      </div>

      <div class="alert-box alert-info mt-4">
        <div class="alert-icon">
          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="12" cy="12" r="10"/>
            <line x1="12" y1="16" x2="12" y2="12"/>
            <line x1="12" y1="8" x2="12.01" y2="8"/>
          </svg>
        </div>
        <div class="alert-content">
          <div class="alert-title">Privacy First</div>
          <p class="alert-text">All analysis happens on your device. Your data is never shared with our servers.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Journal Export Options -->
  <div class="modern-card section-animate" style="animation-delay: 500ms;">
    <div class="card-header">
      <div class="card-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
      </div>
      <div>
        <h3 class="card-title">Export Options</h3>
        <p class="card-subtitle">Share or print your journals</p>
      </div>
    </div>
    <div class="card-content">
      <div class="setting-row">
        <div>
          <div class="setting-title">PDF Export</div>
          <div class="setting-description">High-quality printable format</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="pdf-export" class="toggle-checkbox" checked>
          <label for="pdf-export" class="toggle-label"></label>
        </div>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-title">Plain Text</div>
          <div class="setting-description">Simple text format</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="text-export" class="toggle-checkbox" checked>
          <label for="text-export" class="toggle-label"></label>
        </div>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-title">Markdown</div>
          <div class="setting-description">Formatted text with syntax</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="markdown-export" class="toggle-checkbox">
          <label for="markdown-export" class="toggle-label"></label>
        </div>
      </div>

      <div class="setting-row">
        <div>
          <div class="setting-title">Include Images</div>
          <div class="setting-description">Add photos in exports</div>
        </div>
        <div class="toggle-container">
          <input type="checkbox" id="include-images" class="toggle-checkbox" checked>
          <label for="include-images" class="toggle-label"></label>
        </div>
      </div>

      <button class="button button-secondary w-full mt-4">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
          <polyline points="7 10 12 15 17 10"/>
          <line x1="12" y1="15" x2="12" y2="3"/>
        </svg>
        <span>Export Journal Now</span>
      </button>
    </div>
  </div>
</section>
    <!-- Notifications Tab Content -->
    <section id="notifications-section" class="tab-content" style="display: none;">
      <!-- Reminder Settings -->
      <div class="modern-card section-animate" style="animation-delay: 0ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
              <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Notification Settings</h3>
            <p class="card-subtitle">Manage your reminder preferences</p>
          </div>
        </div>
        <div class="card-content">
          <div class="setting-row">
            <div>
              <div class="setting-title">Journal Reminders</div>
              <div class="setting-description">Daily writing reminders</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="journal-reminders" class="toggle-checkbox" checked>
              <label for="journal-reminders" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Missed Days</div>
              <div class="setting-description">Gentle prompts when you miss entries</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="missed-days" class="toggle-checkbox" checked>
              <label for="missed-days" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Streak Milestones</div>
              <div class="setting-description">Celebrate your progress</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="streak-milestones" class="toggle-checkbox" checked>
              <label for="streak-milestones" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">App Updates</div>
              <div class="setting-description">New features and improvements</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="app-updates" class="toggle-checkbox">
              <label for="app-updates" class="toggle-label"></label>
            </div>
          </div>
        </div>
      </div>

      <!-- Notification Methods -->
      <div class="modern-card section-animate" style="animation-delay: 100ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Notification Methods</h3>
            <p class="card-subtitle">How you'll receive alerts</p>
          </div>
        </div>
        <div class="card-content">
          <div class="setting-row">
            <div>
              <div class="setting-title">Push Notifications</div>
              <div class="setting-description">Alerts on your device</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="push-notifications" class="toggle-checkbox" checked>
              <label for="push-notifications" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Email Notifications</div>
              <div class="setting-description">Reminders in your inbox</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="email-notifications" class="toggle-checkbox">
              <label for="email-notifications" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">SMS Notifications</div>
              <div class="setting-description">Text message reminders</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="sms-notifications" class="toggle-checkbox">
              <label for="sms-notifications" class="toggle-label"></label>
            </div>
          </div>
        </div>
      </div>

      <!-- Do Not Disturb -->
      <div class="modern-card section-animate" style="animation-delay: 200ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <circle cx="12" cy="12" r="10"/>
              <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Quiet Hours</h3>
            <p class="card-subtitle">Set when not to be disturbed</p>
          </div>
        </div>
        <div class="card-content">
          <div class="setting-row">
            <div>
              <div class="setting-title">Do Not Disturb</div>
              <div class="setting-description">Pause all notifications</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="do-not-disturb" class="toggle-checkbox">
              <label for="do-not-disturb" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Quiet Hours Start</div>
              <div class="setting-description">When to pause notifications</div>
            </div>
            <select class="button button-secondary" style="background: white; padding: 0.5rem 1rem;">
              <option value="8pm">8:00 PM</option>
              <option value="9pm">9:00 PM</option>
              <option value="10pm" selected>10:00 PM</option>
              <option value="11pm">11:00 PM</option>
            </select>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Quiet Hours End</div>
              <div class="setting-description">When to resume notifications</div>
            </div>
            <select class="button button-secondary" style="background: white; padding: 0.5rem 1rem;">
              <option value="6am">6:00 AM</option>
              <option value="7am" selected>7:00 AM</option>
              <option value="8am">8:00 AM</option>
              <option value="9am">9:00 AM</option>
            </select>
          </div>

          <div class="alert-box alert-info mt-4">
            <div class="alert-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="16" x2="12" y2="12"/>
                <line x1="12" y1="8" x2="12.01" y2="8"/>
              </svg>
            </div>
            <div class="alert-content">
              <div class="alert-title">When Quiet Hours are active</div>
              <p class="alert-text">You'll still receive important notifications about your account security.</p>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Privacy Tab Content -->
    <section id="privacy-section" class="tab-content" style="display: none;">
      <!-- Security Settings -->
      <div class="modern-card section-animate" style="animation-delay: 0ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Security</h3>
            <p class="card-subtitle">Protect your journal data</p>
          </div>
        </div>
        <div class="card-content">
          <div class="setting-row">
            <div>
              <div class="setting-title">Journal Lock</div>
              <div class="setting-description">Require password</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="journal-lock" class="toggle-checkbox" checked>
              <label for="journal-lock" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Biometric Unlock</div>
              <div class="setting-description">Fingerprint/Face ID</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="biometric-auth" class="toggle-checkbox" checked>
              <label for="biometric-auth" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Auto Logout</div>
              <div class="setting-description">After inactivity</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="auto-logout" class="toggle-checkbox">
              <label for="auto-logout" class="toggle-label"></label>
            </div>
          </div>

          <button class="button button-secondary w-full mt-4">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
              <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
            </svg>
            <span>Change Password</span>
          </button>
        </div>
      </div>

      <!-- Privacy Controls -->
      <div class="modern-card section-animate" style="animation-delay: 100ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Data Privacy</h3>
            <p class="card-subtitle">Manage how your data is handled</p>
          </div>
        </div>
        <div class="card-content">
          <div class="setting-row">
            <div>
              <div class="setting-title">Analytics</div>
              <div class="setting-description">Anonymous usage data</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="analytics" class="toggle-checkbox" checked>
              <label for="analytics" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Encryption</div>
              <div class="setting-description">End-to-end protection</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="encryption" class="toggle-checkbox" checked>
              <label for="encryption" class="toggle-label"></label>
            </div>
          </div>

          <div class="setting-row">
            <div>
              <div class="setting-title">Cloud Backup</div>
              <div class="setting-description">Encrypted cloud storage</div>
            </div>
            <div class="toggle-container">
              <input type="checkbox" id="cloud-backup" class="toggle-checkbox" checked>
              <label for="cloud-backup" class="toggle-label"></label>
            </div>
          </div>

          <div class="alert-box alert-warning mt-4">
            <div class="alert-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"/>
                <line x1="12" y1="8" x2="12" y2="12"/>
                <line x1="12" y1="16" x2="12.01" y2="16"/>
              </svg>
            </div>
            <div class="alert-content">
              <div class="alert-title">Privacy Protection</div>
              <p class="alert-text">Your entries are encrypted and only accessible to you. <a href="#" class="underline">Privacy Policy</a></p>
            </div>
          </div>
        </div>
      </div>

      <!-- Data Management -->
      <div class="modern-card section-animate" style="animation-delay: 200ms;">
        <div class="card-header">
          <div class="card-icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <ellipse cx="12" cy="5" rx="9" ry="3"/>
              <path d="M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"/>
              <path d="M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"/>
            </svg>
          </div>
          <div>
            <h3 class="card-title">Your Data</h3>
            <p class="card-subtitle">Manage your journal information</p>
          </div>
        </div>
        <div class="card-content">
          <div class="grid-2 mb-4">
            <button class="button button-secondary">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="7 10 12 15 17 10"/>
                <line x1="12" y1="15" x2="12" y2="3"/>
              </svg>
              <span>Export Data</span>
            </button>

            <button class="button button-secondary">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                <polyline points="17 8 12 3 7 8"/>
                <line x1="12" y1="3" x2="12" y2="15"/>
              </svg>
              <span>Import Data</span>
            </button>
          </div>

          <div class="alert-box alert-danger mt-4">
            <div class="alert-icon">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"/>
                <line x1="12" y1="9" x2="12" y2="13"/>
                <line x1="12" y1="17" x2="12.01" y2="17"/>
              </svg>
            </div>
            <div class="alert-content">
              <div class="alert-title">Danger Zone</div>
              <div class="grid-2" style="margin-top: 0.75rem;">
                <button class="button button-danger">
                  Delete All Entries
                </button>
                <button class="button button-danger">
                  Delete Account
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Save button bar (fixed at bottom) -->
  <div id="saveBar" class="save-bar">
    <div class="save-bar-content">
      <div class="save-bar-text">Changes will be applied immediately</div>
      <button id="savePreferencesBtn" class="save-button">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/>
          <polyline points="17 21 17 13 7 13 7 21"/>
          <polyline points="7 3 7 8 15 8"/>
        </svg>
        Save Preferences
      </button>
    </div>
  </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
  // Initialize on document load
  document.addEventListener('DOMContentLoaded', function() {
    // Tab switching functionality
    setupTabs();

    // Input change detection for save bar
    setupInputChangeDetection();

    // Font type tabs
    setupFontTabs();

    // Save button functionality
    setupSaveButton();

    // Handle section animations with delays
    animateSectionsWithDelay();

    // Accessibility: Reduce motion toggle
    setupReduceMotion();
  });

  // Tab switching functionality
  function setupTabs() {
    const tabButtons = document.querySelectorAll('.tab-button');
    const tabContents = document.querySelectorAll('.tab-content');

    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        // Get tab target
        const targetId = button.dataset.tab;

        // Hide all tab contents
        tabContents.forEach(content => {
          content.style.display = 'none';
        });

        // Show selected tab content
        document.getElementById(targetId).style.display = 'block';

        // Update active button state
        tabButtons.forEach(btn => {
          btn.classList.remove('active');
        });
        button.classList.add('active');

        // Show save bar
        document.getElementById('saveBar').classList.add('visible');

        // Animate sections in the new tab
        animateSectionsInTab(targetId);
      });
    });
  }

  // Animate sections in a tab
  function animateSectionsInTab(tabId) {
    const sections = document.querySelectorAll(`#${tabId} .section-animate`);
    sections.forEach((section, index) => {
      section.style.animationDelay = `${index * 100}ms`;
      // Reset animation
      section.style.animation = 'none';
      section.offsetHeight; // Trigger reflow
      section.style.animation = null;
    });
  }

  // Staggered animation on initial load
  function animateSectionsWithDelay() {
    const sections = document.querySelectorAll('#appearance-section .section-animate');
    sections.forEach((section, index) => {
      section.style.animationDelay = `${index * 100}ms`;
    });
  }

  // Setup font tabs
  function setupFontTabs() {
    const textFontTab = document.getElementById('text-font-tab');
    const handwritingTab = document.getElementById('handwriting-tab');
    const textFontOptions = document.getElementById('text-font-options');
    const handwritingFontOptions = document.getElementById('handwriting-font-options');

    if (textFontTab && handwritingTab) {
      textFontTab.addEventListener('click', () => {
        textFontOptions.style.display = 'grid';
        handwritingFontOptions.style.display = 'none';
        textFontTab.classList.add('active');
        handwritingTab.classList.remove('active');
      });

      handwritingTab.addEventListener('click', () => {
        textFontOptions.style.display = 'none';
        handwritingFontOptions.style.display = 'grid';
        handwritingTab.classList.add('active');
        textFontTab.classList.remove('active');
      });
    }
  }

  // Listen for input changes to show save bar
  function setupInputChangeDetection() {
    const inputs = document.querySelectorAll('input, select');
    inputs.forEach(input => {
      input.addEventListener('change', () => {
        document.getElementById('saveBar').classList.add('visible');

        // Special case for reduce motion
        if (input.id === 'reduce-motion') {
          if (input.checked) {
            document.body.classList.add('reduce-motion');
          } else {
            document.body.classList.remove('reduce-motion');
          }
        }
      });
    });
  }

  // Reduce motion accessibility
  function setupReduceMotion() {
    const reduceMotionToggle = document.getElementById('reduce-motion');
    if (reduceMotionToggle) {
      reduceMotionToggle.addEventListener('change', function() {
        if (this.checked) {
          document.body.classList.add('reduce-motion');
        } else {
          document.body.classList.remove('reduce-motion');
        }
      });
    }
  }

  // Save button functionality
  function setupSaveButton() {
    const saveButton = document.getElementById('savePreferencesBtn');
    const saveBar = document.getElementById('saveBar');
    const successNotification = document.getElementById('successNotification');

    saveButton.addEventListener('click', () => {
      // Show loading state
      const originalContent = saveButton.innerHTML;
      saveButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="animate-spin"><circle cx="12" cy="12" r="10" opacity="0.25"></circle><path opacity="0.75" d="M12 2a10 10 0 0 1 10 10"></path></svg> Saving...`;
      saveButton.disabled = true;

      // Simulate API call
      setTimeout(() => {
        // Restore button state
        saveButton.innerHTML = originalContent;
        saveButton.disabled = false;

        // Hide save bar
        saveBar.classList.remove('visible');

        // Show success notification
        successNotification.classList.add('visible');

        // Hide notification after 3 seconds
        setTimeout(() => {
          successNotification.classList.remove('visible');
        }, 3000);
      }, 1200);
    });
  }
</script>
{% endblock %}
